<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>lhings-c: core/lhings.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="lhings_logo_peque_azul_transp.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">lhings-c
   </div>
   <div id="projectbrief">Lhings C library for Linux</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_4270bfced15e0e73154b13468c7c9ad9.html">core</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">lhings.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Main header file for the Lhings C library.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;utils/data_structures.h&quot;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__lh__config.html">_lh_config</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__device__info.html">_device_info</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">LH_Info contains generic information about the device.  <a href="struct__device__info.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__status__component.html">_status_component</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">LH_Component is used to define Lhings <a href="http://support.lhings.com/Typed-Parameters.html">typed parameters</a>.  <a href="struct__status__component.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__device.html">_device</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">LH_Device is the main data type used to store the data of a device and its capabilities.  <a href="struct__device.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__event.html">_event</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">LH_Event stores the details of an event, like its name and its components, if any.  <a href="struct__event.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__action.html">_action</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">LH_Action stores the details of an action, like its name and arguments.  <a href="struct__action.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aa4a76315388b2c84ce006e6d69d5e478"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa4a76315388b2c84ce006e6d69d5e478"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_DELAY_BETWEEN_RETRIES_SECS</b>&#160;&#160;&#160;120</td></tr>
<tr class="separator:aa4a76315388b2c84ce006e6d69d5e478"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40dddc72bb76c5cfb13c8613e7aef799"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a40dddc72bb76c5cfb13c8613e7aef799"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DELAY_BETWEEN_KEEPALIVES_SECS</b>&#160;&#160;&#160;30</td></tr>
<tr class="separator:a40dddc72bb76c5cfb13c8613e7aef799"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87bfa41843f9bc71afc8155ed4fc38d6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a87bfa41843f9bc71afc8155ed4fc38d6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>LOG_DESCRIPTOR</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a87bfa41843f9bc71afc8155ed4fc38d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0abac35f0949d4a62bb6463d1d6bcb2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad0abac35f0949d4a62bb6463d1d6bcb2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_STR_TYPE_LEN</b>&#160;&#160;&#160;9</td></tr>
<tr class="separator:ad0abac35f0949d4a62bb6463d1d6bcb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5ae784213e72e01cc90d68b7f153fd9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af5ae784213e72e01cc90d68b7f153fd9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MIN_COMP_JSON_LEN</b>&#160;&#160;&#160;22</td></tr>
<tr class="separator:af5ae784213e72e01cc90d68b7f153fd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef3817a4682d13f8f09751a47e4c3180"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aef3817a4682d13f8f09751a47e4c3180"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MIN_ACTION_JSON_LEN</b>&#160;&#160;&#160;40</td></tr>
<tr class="separator:aef3817a4682d13f8f09751a47e4c3180"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a344f35feac0a44c9d7c6efcbf35d5078"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a344f35feac0a44c9d7c6efcbf35d5078"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MIN_EVENT_JSON_LEN</b>&#160;&#160;&#160;27</td></tr>
<tr class="separator:a344f35feac0a44c9d7c6efcbf35d5078"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1edab279e8e2111a17cd3ae9d34d622"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af1edab279e8e2111a17cd3ae9d34d622"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MIN_DESCRIPTOR_JSON_LEN</b>&#160;&#160;&#160;153</td></tr>
<tr class="separator:af1edab279e8e2111a17cd3ae9d34d622"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a4fc604d3db1b62ac4f36fc187dc93f2b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4fc604d3db1b62ac4f36fc187dc93f2b"></a>
typedef struct <a class="el" href="struct__lh__config.html">_lh_config</a>&#160;</td><td class="memItemRight" valign="bottom"><b>LH_Config</b></td></tr>
<tr class="separator:a4fc604d3db1b62ac4f36fc187dc93f2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78d6d8a4a404ff5b405bc9a0053d9b05"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct__device__info.html">_device_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lhings_8h.html#a78d6d8a4a404ff5b405bc9a0053d9b05">LH_Info</a></td></tr>
<tr class="memdesc:a78d6d8a4a404ff5b405bc9a0053d9b05"><td class="mdescLeft">&#160;</td><td class="mdescRight">LH_Info contains generic information about the device.  <a href="#a78d6d8a4a404ff5b405bc9a0053d9b05">More...</a><br/></td></tr>
<tr class="separator:a78d6d8a4a404ff5b405bc9a0053d9b05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af58be46f720d69f84e89879b36eee72a"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct__status__component.html">_status_component</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lhings_8h.html#af58be46f720d69f84e89879b36eee72a">LH_Component</a></td></tr>
<tr class="memdesc:af58be46f720d69f84e89879b36eee72a"><td class="mdescLeft">&#160;</td><td class="mdescRight">LH_Component is used to define Lhings <a href="http://support.lhings.com/Typed-Parameters.html">typed parameters</a>.  <a href="#af58be46f720d69f84e89879b36eee72a">More...</a><br/></td></tr>
<tr class="separator:af58be46f720d69f84e89879b36eee72a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fc721d1beaa907b9312f4326788f4fd"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct__device.html">_device</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lhings_8h.html#a7fc721d1beaa907b9312f4326788f4fd">LH_Device</a></td></tr>
<tr class="memdesc:a7fc721d1beaa907b9312f4326788f4fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">LH_Device is the main data type used to store the data of a device and its capabilities.  <a href="#a7fc721d1beaa907b9312f4326788f4fd">More...</a><br/></td></tr>
<tr class="separator:a7fc721d1beaa907b9312f4326788f4fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a435e3deeec4e4dfaa98915a27b8a5198"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a435e3deeec4e4dfaa98915a27b8a5198"></a>
typedef struct <a class="el" href="struct__event.html">_event</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lhings_8h.html#a435e3deeec4e4dfaa98915a27b8a5198">LH_Event</a></td></tr>
<tr class="memdesc:a435e3deeec4e4dfaa98915a27b8a5198"><td class="mdescLeft">&#160;</td><td class="mdescRight">LH_Event stores the details of an event, like its name and its components, if any. <br/></td></tr>
<tr class="separator:a435e3deeec4e4dfaa98915a27b8a5198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accf7dd6f0c6161f890c36fae7b6f54e6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="accf7dd6f0c6161f890c36fae7b6f54e6"></a>
typedef struct <a class="el" href="struct__action.html">_action</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lhings_8h.html#accf7dd6f0c6161f890c36fae7b6f54e6">LH_Action</a></td></tr>
<tr class="memdesc:accf7dd6f0c6161f890c36fae7b6f54e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">LH_Action stores the details of an action, like its name and arguments. <br/></td></tr>
<tr class="separator:accf7dd6f0c6161f890c36fae7b6f54e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a593c5135b1c64f3c98f35c5ad8487b20"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lhings_8h.html#a593c5135b1c64f3c98f35c5ad8487b20">LH_ComponentType</a> { <br/>
&#160;&#160;<b>LH_TYPE_INTEGER</b>, 
<b>LH_TYPE_FLOAT</b>, 
<b>LH_TYPE_STRING</b>, 
<b>LH_TYPE_TIMESTAMP</b>, 
<br/>
&#160;&#160;<b>LH_TYPE_BOOLEAN</b>, 
<b>LH_TYPE_NO_TYPE</b>
<br/>
 }</td></tr>
<tr class="memdesc:a593c5135b1c64f3c98f35c5ad8487b20"><td class="mdescLeft">&#160;</td><td class="mdescRight">enum reflecting the <a href="http://support.lhings.com/Typed-Parameters.html">Lhings data types</a>. <br/></td></tr>
<tr class="separator:a593c5135b1c64f3c98f35c5ad8487b20"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4fc01d736fe50cf5b977f755b675f11d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lhings_8h.html#a4fc01d736fe50cf5b977f755b675f11d">setup</a> ()</td></tr>
<tr class="memdesc:a4fc01d736fe50cf5b977f755b675f11d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function must be used to define the actions, events and status components of the device.  <a href="#a4fc01d736fe50cf5b977f755b675f11d">More...</a><br/></td></tr>
<tr class="separator:a4fc01d736fe50cf5b977f755b675f11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe461d27b9c48d5921c00d521181f12f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lhings_8h.html#afe461d27b9c48d5921c00d521181f12f">loop</a> ()</td></tr>
<tr class="memdesc:afe461d27b9c48d5921c00d521181f12f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main loop of execution.  <a href="#afe461d27b9c48d5921c00d521181f12f">More...</a><br/></td></tr>
<tr class="separator:afe461d27b9c48d5921c00d521181f12f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c62a35e8b95dbf98cfc45b71b7a9459"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lhings_8h.html#a7c62a35e8b95dbf98cfc45b71b7a9459">lh_start_device</a> (<a class="el" href="lhings_8h.html#a7fc721d1beaa907b9312f4326788f4fd">LH_Device</a> *device, char *device_name, char *username, char *password)</td></tr>
<tr class="memdesc:a7c62a35e8b95dbf98cfc45b71b7a9459"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function starts the execution of the device.  <a href="#a7c62a35e8b95dbf98cfc45b71b7a9459">More...</a><br/></td></tr>
<tr class="separator:a7c62a35e8b95dbf98cfc45b71b7a9459"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab52e1ebaea80376b2a891cd6dfb87a3c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lhings_8h.html#ab52e1ebaea80376b2a891cd6dfb87a3c">lh_set_loop_frequency_hz</a> (double freq)</td></tr>
<tr class="memdesc:ab52e1ebaea80376b2a891cd6dfb87a3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the frequency at which the function loop will be called.  <a href="#ab52e1ebaea80376b2a891cd6dfb87a3c">More...</a><br/></td></tr>
<tr class="separator:ab52e1ebaea80376b2a891cd6dfb87a3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3de5970570c0ec048d08dc82d25bcd47"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lhings_8h.html#a3de5970570c0ec048d08dc82d25bcd47">lh_set_loop_frequency_secs</a> (uint32_t secs)</td></tr>
<tr class="memdesc:a3de5970570c0ec048d08dc82d25bcd47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the frequency at which the function loop will be called.  <a href="#a3de5970570c0ec048d08dc82d25bcd47">More...</a><br/></td></tr>
<tr class="separator:a3de5970570c0ec048d08dc82d25bcd47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7878b83fb905649c36620b7121c12f5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="lhings_8h.html#af58be46f720d69f84e89879b36eee72a">LH_Component</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lhings_8h.html#af7878b83fb905649c36620b7121c12f5">lh_model_create_component</a> (char *name, <a class="el" href="lhings_8h.html#a593c5135b1c64f3c98f35c5ad8487b20">LH_ComponentType</a> type, void *value)</td></tr>
<tr class="memdesc:af7878b83fb905649c36620b7121c12f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to create components, either to define device capabilities (in the function setup) or to define the <a href="http://support.lhings.com/Event-Payload.html">payload</a> to be sent with an event.  <a href="#af7878b83fb905649c36620b7121c12f5">More...</a><br/></td></tr>
<tr class="separator:af7878b83fb905649c36620b7121c12f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2eff2e4d331177e61a7cf96b10eefad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lhings_8h.html#ac2eff2e4d331177e61a7cf96b10eefad">lh_model_free_component</a> (<a class="el" href="lhings_8h.html#af58be46f720d69f84e89879b36eee72a">LH_Component</a> *component)</td></tr>
<tr class="memdesc:ac2eff2e4d331177e61a7cf96b10eefad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees the memory allocated by lh_model_create_component.  <a href="#ac2eff2e4d331177e61a7cf96b10eefad">More...</a><br/></td></tr>
<tr class="separator:ac2eff2e4d331177e61a7cf96b10eefad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a663f07f59f5ce763a179ac2c5948f31c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lhings_8h.html#a663f07f59f5ce763a179ac2c5948f31c">lh_model_add_event</a> (<a class="el" href="lhings_8h.html#a7fc721d1beaa907b9312f4326788f4fd">LH_Device</a> *device, char *name, <a class="el" href="structlist.html">LH_List</a> *components)</td></tr>
<tr class="memdesc:a663f07f59f5ce763a179ac2c5948f31c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tells the library that the device is able to send the named event.  <a href="#a663f07f59f5ce763a179ac2c5948f31c">More...</a><br/></td></tr>
<tr class="separator:a663f07f59f5ce763a179ac2c5948f31c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b471411a0e442d95460db25dabe6237"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lhings_8h.html#a3b471411a0e442d95460db25dabe6237">lh_model_add_status_component</a> (<a class="el" href="lhings_8h.html#a7fc721d1beaa907b9312f4326788f4fd">LH_Device</a> *device, char *name, <a class="el" href="lhings_8h.html#a593c5135b1c64f3c98f35c5ad8487b20">LH_ComponentType</a> type, void *value)</td></tr>
<tr class="memdesc:a3b471411a0e442d95460db25dabe6237"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tells the library that the device has the named status component.  <a href="#a3b471411a0e442d95460db25dabe6237">More...</a><br/></td></tr>
<tr class="separator:a3b471411a0e442d95460db25dabe6237"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50111b7d7473f0cc7148a9cd1af8badc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lhings_8h.html#a50111b7d7473f0cc7148a9cd1af8badc">lh_model_add_action</a> (<a class="el" href="lhings_8h.html#a7fc721d1beaa907b9312f4326788f4fd">LH_Device</a> *device, char *name, char *description, <a class="el" href="structlist.html">LH_List</a> *arguments, void(*action_function)(<a class="el" href="structdictionary.html">LH_Dict</a> *argument_values))</td></tr>
<tr class="memdesc:a50111b7d7473f0cc7148a9cd1af8badc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tells the library that the device can perform the named action.  <a href="#a50111b7d7473f0cc7148a9cd1af8badc">More...</a><br/></td></tr>
<tr class="separator:a50111b7d7473f0cc7148a9cd1af8badc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa499983cb8545f61f0cd0d3ae21a5376"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lhings_8h.html#aa499983cb8545f61f0cd0d3ae21a5376">lh_send_event</a> (<a class="el" href="lhings_8h.html#a7fc721d1beaa907b9312f4326788f4fd">LH_Device</a> *device, char *event_name, char *payload, <a class="el" href="structlist.html">LH_List</a> *components)</td></tr>
<tr class="memdesc:aa499983cb8545f61f0cd0d3ae21a5376"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notifies Lhings about the occurence of the named event, optionally with a <a href="http://support.lhings.com/Event-Payload.html">payload</a>.  <a href="#aa499983cb8545f61f0cd0d3ae21a5376">More...</a><br/></td></tr>
<tr class="separator:aa499983cb8545f61f0cd0d3ae21a5376"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76ee252acd09eb048853b5ab239ed910"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lhings_8h.html#a76ee252acd09eb048853b5ab239ed910">lh_store_status</a> (<a class="el" href="lhings_8h.html#a7fc721d1beaa907b9312f4326788f4fd">LH_Device</a> *device)</td></tr>
<tr class="memdesc:a76ee252acd09eb048853b5ab239ed910"><td class="mdescLeft">&#160;</td><td class="mdescRight">Automatically stores the status of the device in Lhings, using the <a href="http://support.lhings.com/The-Data-API.html">Data API</a>.  <a href="#a76ee252acd09eb048853b5ab239ed910">More...</a><br/></td></tr>
<tr class="separator:a76ee252acd09eb048853b5ab239ed910"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a80c0aa1c5eebffa843d818943f5d7f03"><td class="memItemLeft" align="right" valign="top"><a class="el" href="lhings_8h.html#a7fc721d1beaa907b9312f4326788f4fd">LH_Device</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lhings_8h.html#a80c0aa1c5eebffa843d818943f5d7f03">this_device</a></td></tr>
<tr class="memdesc:a80c0aa1c5eebffa843d818943f5d7f03"><td class="mdescLeft">&#160;</td><td class="mdescRight">This instance of LH_Device is used internally by the library to track the state and configuration of the device while it is being executed.  <a href="#a80c0aa1c5eebffa843d818943f5d7f03">More...</a><br/></td></tr>
<tr class="separator:a80c0aa1c5eebffa843d818943f5d7f03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44673a98db0b4c15f855fed989c70e7f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a44673a98db0b4c15f855fed989c70e7f"></a>
<a class="el" href="struct__lh__config.html">LH_Config</a>&#160;</td><td class="memItemRight" valign="bottom"><b>config</b></td></tr>
<tr class="separator:a44673a98db0b4c15f855fed989c70e7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main header file for the Lhings C library. </p>
<p>This header file contains all the main functions used to implement a device that connects to Lhings.</p>
<p>The structure of a program that uses the library is very simple, it has to implement the functions <a class="el" href="lhings_8h.html#a4fc01d736fe50cf5b977f755b675f11d" title="This function must be used to define the actions, events and status components of the device...">setup()</a> and <a class="el" href="lhings_8h.html#afe461d27b9c48d5921c00d521181f12f" title="Main loop of execution. ">loop()</a> and, of course, a main() function.</p>
<p><a class="el" href="lhings_8h.html#a4fc01d736fe50cf5b977f755b675f11d" title="This function must be used to define the actions, events and status components of the device...">setup()</a> is used to configure the device and is where all the initialization code should go. Configuring the device means telling the Lhings library which are its actions, events and status components (see <a href="http://support.lhings.com/Getting-started.html">http://support.lhings.com/Getting-started.html</a> to get a quick introduction into the main Lhings concepts).</p>
<p>Actions, events and status components are added to the Lhings device using the functions <a class="el" href="lhings_8h.html#a50111b7d7473f0cc7148a9cd1af8badc" title="Tells the library that the device can perform the named action. ">lh_model_add_action()</a>, <a class="el" href="lhings_8h.html#a663f07f59f5ce763a179ac2c5948f31c" title="Tells the library that the device is able to send the named event. ">lh_model_add_event()</a> and <a class="el" href="lhings_8h.html#a3b471411a0e442d95460db25dabe6237" title="Tells the library that the device has the named status component. ">lh_model_add_status_component()</a> respectively. This functions populate the struct LH_Device this_device adding to it all the information needed so that the Lhings library is able to generate the descriptor of the device (see <a href="http://support.lhings.com/The-Device-Descriptor.html">http://support.lhings.com/The-Device-Descriptor.html</a> for more details about the device descriptor).</p>
<p>The <a class="el" href="lhings_8h.html#afe461d27b9c48d5921c00d521181f12f" title="Main loop of execution. ">loop()</a> function will be periodically executed at a rate which can be changed calling <a class="el" href="lhings_8h.html#ab52e1ebaea80376b2a891cd6dfb87a3c" title="Set the frequency at which the function loop will be called. ">lh_set_loop_frequency_hz()</a> or <a class="el" href="lhings_8h.html#a3de5970570c0ec048d08dc82d25bcd47" title="Set the frequency at which the function loop will be called. ">lh_set_loop_frequency_secs()</a>. You can use this method to implement anything that your device needs to perform or check periodically.</p>
<p>In addition to this, you can define action functions, which will be executed any time the corresponding action is requested from the Lhings mobile or web apps, or using the Lhings REST API (<a href="http://support.lhings.com/Lhings-API-Documentation.html">http://support.lhings.com/Lhings-API-Documentation.html</a>). These action functions should have the following signature: </p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> action_function_example(<a class="code" href="structdictionary.html">LH_Dict</a> *function_arguments)</div>
</div><!-- fragment --><p> A pointer to this functions must be passed to <a class="el" href="lhings_8h.html#a50111b7d7473f0cc7148a9cd1af8badc" title="Tells the library that the device can perform the named action. ">lh_model_add_action()</a> so that the Lhings library knows which function to call when the named action is requested.</p>
<p>Likewise, you can use variables in your code to define status components of your device, passing a pointer to them in the call to the function <a class="el" href="lhings_8h.html#a3b471411a0e442d95460db25dabe6237" title="Tells the library that the device has the named status component. ">lh_model_add_status_component()</a>. For instance, if your device is a sensor that measures temperature and you store its value in a <code>float</code> variable called <code>temp</code>, you can expose its value as a status component passing a pointer to temp to the aforementioned function. Then its real time value could be checked from the mobile and web apps of Lhings and also using the Lhings REST API.</p>
<p>Whenever you need to send an event you can use the function <a class="el" href="lhings_8h.html#aa499983cb8545f61f0cd0d3ae21a5376" title="Notifies Lhings about the occurence of the named event, optionally with a payload. ">lh_send_event()</a>.</p>
<p>In order to start your device, you have to call the function <a class="el" href="lhings_8h.html#a7c62a35e8b95dbf98cfc45b71b7a9459" title="This function starts the execution of the device. ">lh_start_device()</a> from your main() function.</p>
<p>Finally a note on conventions used by the library: </p>
<ul>
<li>
All library API functions start with <code>lh_*</code> . In the same way, all library defined data types start with <code>LH_*</code> .  </li>
<li>
The library makes extensive use of dynamic memory allocation. Some functions return pointers. By convention, this functions will always return a pointer to a dynamically allocated memory block. In the case of primitive data types (<code>int</code> , <code>float</code>, <code>char</code>, etc) the memory must be freed with free() when it is no longer needed. In the case of library defined data types (<code>LH_Device</code>, <code>LH_Action</code>, <code>LH_Dict</code>, <code>LH_List</code>, etc.) always exists a function <code>lh_free_*</code> that must be used to properly release the memory allocated by those methods. The library itself is checked against memory leaks using <a href="http://valgrind.org/">Valgrind</a> before each release.  </li>
</ul>
<dl class="section see"><dt>See Also</dt><dd><a href="http://support.lhings.com">http://support.lhings.com</a> </dd></dl>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="af58be46f720d69f84e89879b36eee72a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct__status__component.html">_status_component</a>  <a class="el" href="lhings_8h.html#af58be46f720d69f84e89879b36eee72a">LH_Component</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>LH_Component is used to define Lhings <a href="http://support.lhings.com/Typed-Parameters.html">typed parameters</a>. </p>
<p>Typed parameters are used in 3 places in the Lhings library: </p>
<ul>
<li>
To define status components of the device in the call to <a class="el" href="lhings_8h.html#a3b471411a0e442d95460db25dabe6237" title="Tells the library that the device has the named status component. ">lh_model_add_status_component()</a>. </li>
<li>
To define event components of the device in the call to <a class="el" href="lhings_8h.html#a663f07f59f5ce763a179ac2c5948f31c" title="Tells the library that the device is able to send the named event. ">lh_model_add_event()</a>. </li>
<li>
To define arguments of the actions in the call to <a class="el" href="lhings_8h.html#a50111b7d7473f0cc7148a9cd1af8badc" title="Tells the library that the device can perform the named action. ">lh_model_add_action()</a>. </li>
</ul>

</div>
</div>
<a class="anchor" id="a7fc721d1beaa907b9312f4326788f4fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct__device.html">_device</a>  <a class="el" href="lhings_8h.html#a7fc721d1beaa907b9312f4326788f4fd">LH_Device</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>LH_Device is the main data type used to store the data of a device and its capabilities. </p>
<p>It also stores the information about the Lhings account to which the device belongs. </p>

</div>
</div>
<a class="anchor" id="a78d6d8a4a404ff5b405bc9a0053d9b05"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct__device__info.html">_device_info</a>  <a class="el" href="lhings_8h.html#a78d6d8a4a404ff5b405bc9a0053d9b05">LH_Info</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>LH_Info contains generic information about the device. </p>
<p>This information will be added to the device descriptor. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a50111b7d7473f0cc7148a9cd1af8badc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lh_model_add_action </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lhings_8h.html#a7fc721d1beaa907b9312f4326788f4fd">LH_Device</a> *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>description</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlist.html">LH_List</a> *&#160;</td>
          <td class="paramname"><em>arguments</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(<a class="el" href="structdictionary.html">LH_Dict</a> *argument_values)&#160;</td>
          <td class="paramname"><em>action_function</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tells the library that the device can perform the named action. </p>
<p>This information will be used by the library to automatically build the device descriptor and send it to Lhings. A device can have as many actions as needed. See <a href="http://support.lhings.com/The-Device-Descriptor.html">http://support.lhings.com/The-Device-Descriptor.html</a> for more details on the device descriptor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>The device that is capable of performing this action (usually this will be the variable this_device). </td></tr>
    <tr><td class="paramname">name</td><td>A string with the name of the action. </td></tr>
    <tr><td class="paramname">description</td><td>A string with the description of the action (optional, can be null). </td></tr>
    <tr><td class="paramname">arguments</td><td>The list of arguments the action needs to know to be executed. If null is passed no arguments are added. </td></tr>
    <tr><td class="paramname">action_function</td><td>A function pointer to the function that actually performs the requested action. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a663f07f59f5ce763a179ac2c5948f31c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lh_model_add_event </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lhings_8h.html#a7fc721d1beaa907b9312f4326788f4fd">LH_Device</a> *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlist.html">LH_List</a> *&#160;</td>
          <td class="paramname"><em>components</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tells the library that the device is able to send the named event. </p>
<p>This information will be used by the library to automatically build the device descriptor and send it to Lhings. A device can send as many events as needed. See <a href="http://support.lhings.com/The-Device-Descriptor.html">http://support.lhings.com/The-Device-Descriptor.html</a> for more details on the device descriptor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>The device that is able to send the event (usually this will be the variable this_device). </td></tr>
    <tr><td class="paramname">name</td><td>A string with the name of the event. </td></tr>
    <tr><td class="paramname">components</td><td>A list with the components of the event. If null is passed no components are added. For more details, see <a href="http://support.lhings.com/Event-Payload.html#How-to-use-structured-payloads">http://support.lhings.com/Event-Payload.html#How-to-use-structured-payloads</a> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a3b471411a0e442d95460db25dabe6237"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lh_model_add_status_component </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lhings_8h.html#a7fc721d1beaa907b9312f4326788f4fd">LH_Device</a> *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lhings_8h.html#a593c5135b1c64f3c98f35c5ad8487b20">LH_ComponentType</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tells the library that the device has the named status component. </p>
<p>This information will be used by the library to automatically build the device descriptor and send it to Lhings. A device can have up to 8 status components. See <a href="http://support.lhings.com/The-Device-Descriptor.html">http://support.lhings.com/The-Device-Descriptor.html</a> for more details on the device descriptor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>The device to which the status component belongs (usually this will be the variable this_device). </td></tr>
    <tr><td class="paramname">name</td><td>A string with the name of the status component. </td></tr>
    <tr><td class="paramname">type</td><td>The type of the status component (see <a href="http://support.lhings.com/Typed-Parameters.html">http://support.lhings.com/Typed-Parameters.html</a> for more details). </td></tr>
    <tr><td class="paramname">value</td><td>A pointer to the variable that stores the value of the status component. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af7878b83fb905649c36620b7121c12f5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="lhings_8h.html#af58be46f720d69f84e89879b36eee72a">LH_Component</a>* lh_model_create_component </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lhings_8h.html#a593c5135b1c64f3c98f35c5ad8487b20">LH_ComponentType</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used to create components, either to define device capabilities (in the function setup) or to define the <a href="http://support.lhings.com/Event-Payload.html">payload</a> to be sent with an event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the component. </td></tr>
    <tr><td class="paramname">type</td><td>The type of the component (see <a href="http://support.lhings.com/Typed-Parameters.html">http://support.lhings.com/Typed-Parameters.html</a> for more details). </td></tr>
    <tr><td class="paramname">value</td><td>A pointer to the variable that holds the value of the component, if any. If this component has no associated value, pass null. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the LH_Component created. The returned pointer must be freed when it is no longer needed using lh_model_free_component. </dd></dl>

</div>
</div>
<a class="anchor" id="ac2eff2e4d331177e61a7cf96b10eefad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lh_model_free_component </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lhings_8h.html#af58be46f720d69f84e89879b36eee72a">LH_Component</a> *&#160;</td>
          <td class="paramname"><em>component</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees the memory allocated by lh_model_create_component. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">component</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa499983cb8545f61f0cd0d3ae21a5376"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lh_send_event </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lhings_8h.html#a7fc721d1beaa907b9312f4326788f4fd">LH_Device</a> *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>event_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlist.html">LH_List</a> *&#160;</td>
          <td class="paramname"><em>components</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Notifies Lhings about the occurence of the named event, optionally with a <a href="http://support.lhings.com/Event-Payload.html">payload</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>The device that notifies about the occurence of the event (usually this will be the variable this_device). </td></tr>
    <tr><td class="paramname">event_name</td><td>A string containing the name of the event. </td></tr>
    <tr><td class="paramname">payload</td><td>A string containing the payload of the event (optional, can be null). If both payload and components are not null, then components is discarded and has no effect. </td></tr>
    <tr><td class="paramname">components</td><td>A list of LH_Component structs that contains the components that want to be sent with the event (optional, can be null). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if event is sent successfully, 0 otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="ab52e1ebaea80376b2a891cd6dfb87a3c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lh_set_loop_frequency_hz </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>freq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the frequency at which the function loop will be called. </p>
<p>The library will do this on a best effort basis, there is no guarantee on the precision of timing between calls. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">freq</td><td>The frequency in hertz at which loop function will be called. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a3de5970570c0ec048d08dc82d25bcd47"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lh_set_loop_frequency_secs </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>secs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the frequency at which the function loop will be called. </p>
<p>The library will do this on a best effort basis, there is no guarantee on the precision of timing between calls. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">secs</td><td>The time in seconds between two consecutive calls to loop function. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a7c62a35e8b95dbf98cfc45b71b7a9459"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lh_start_device </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lhings_8h.html#a7fc721d1beaa907b9312f4326788f4fd">LH_Device</a> *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>device_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>username</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>password</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function starts the execution of the device. </p>
<p>It will connect to Lhings, register the device in Lhings if needed, call <a class="el" href="lhings_8h.html#a4fc01d736fe50cf5b977f755b675f11d" title="This function must be used to define the actions, events and status components of the device...">setup()</a>, send the descriptor and periodically execute the function <a class="el" href="lhings_8h.html#afe461d27b9c48d5921c00d521181f12f" title="Main loop of execution. ">loop()</a>. If there are no errors, the call to this function never returns.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>A pointer to a structure LH_Device. In practice, a pointer to the variable this_device (defined in <a class="el" href="lhings_8h.html" title="Main header file for the Lhings C library. ">lhings.h</a>) must always be passed. </td></tr>
    <tr><td class="paramname">device_name</td><td>A string with the name given to the device. </td></tr>
    <tr><td class="paramname">username</td><td>A string with the username of the account of Lhings in which the device will be registered. </td></tr>
    <tr><td class="paramname">password</td><td>A string with the password of the account of Lhings in which the device will be registered. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if there is no error. On success this function never returns. </dd></dl>

</div>
</div>
<a class="anchor" id="a76ee252acd09eb048853b5ab239ed910"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lh_store_status </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lhings_8h.html#a7fc721d1beaa907b9312f4326788f4fd">LH_Device</a> *&#160;</td>
          <td class="paramname"><em>device</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Automatically stores the status of the device in Lhings, using the <a href="http://support.lhings.com/The-Data-API.html">Data API</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

</div>
</div>
<a class="anchor" id="afe461d27b9c48d5921c00d521181f12f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main loop of execution. </p>
<p>This function will be called periodically by the library. The period between two successive calls can be defined using the functions lh_set_loop_frequency_hz and lh_set_loop_frequency_secs </p>

</div>
</div>
<a class="anchor" id="a4fc01d736fe50cf5b977f755b675f11d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function must be used to define the actions, events and status components of the device. </p>
<p>In addition all initialization required by code external to the library can be put here. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a80c0aa1c5eebffa843d818943f5d7f03"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="lhings_8h.html#a7fc721d1beaa907b9312f4326788f4fd">LH_Device</a> this_device</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This instance of LH_Device is used internally by the library to track the state and configuration of the device while it is being executed. </p>
<p>Its reference is the one that must be passed in the call to <a class="el" href="lhings_8h.html#a7c62a35e8b95dbf98cfc45b71b7a9459" title="This function starts the execution of the device. ">lh_start_device()</a>. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 23 2015 07:20:28 for lhings-c by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
