<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>lhings-c: abstraction/udp-comm/udp_api.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="lhings_logo_peque_azul_transp.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">lhings-c
   </div>
   <div id="projectbrief">Lhings C library for Linux</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bdacf7e7d9b2fccc8d2916146d112d0c.html">abstraction</a></li><li class="navelem"><a class="el" href="dir_65c590de744c9583c1604f1c7473a049.html">udp-comm</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">udp_api.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This header file contains all the functions that abstract the UDP communications of the library.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br/>
<code>#include &quot;../../core/stun-messaging/stun_message.h&quot;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a5ad9288e517a09e28b095c741c7ce4c1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5ad9288e517a09e28b095c741c7ce4c1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>LHINGS_SERVER_HOST</b>&#160;&#160;&#160;&quot;www.lhings.com&quot;</td></tr>
<tr class="separator:a5ad9288e517a09e28b095c741c7ce4c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8928e1feca8cb944a76c34f5ecf0554f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8928e1feca8cb944a76c34f5ecf0554f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>LHINGS_SERVER_UDP_PORT</b>&#160;&#160;&#160;&quot;3478&quot;</td></tr>
<tr class="separator:a8928e1feca8cb944a76c34f5ecf0554f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c51b9a83d264825d6d303edd784e889"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0c51b9a83d264825d6d303edd784e889"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAXBUFLEN</b>&#160;&#160;&#160;2048</td></tr>
<tr class="separator:a0c51b9a83d264825d6d303edd784e889"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a584c71f092ef9d829a6ad2e13b3e788e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="udp__api_8h.html#a584c71f092ef9d829a6ad2e13b3e788e">lh_send_to_server</a> (<a class="el" href="struct_stun_message.html">StunMessage</a> *message)</td></tr>
<tr class="memdesc:a584c71f092ef9d829a6ad2e13b3e788e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends to Lhings server (www.lhings.com) UDP port 3478 the bytes that make up the given STUN message.  <a href="#a584c71f092ef9d829a6ad2e13b3e788e">More...</a><br/></td></tr>
<tr class="separator:a584c71f092ef9d829a6ad2e13b3e788e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8660ba52183d73fde7347516d56c61f6"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="udp__api_8h.html#a8660ba52183d73fde7347516d56c61f6">lh_receive_from_server</a> (uint16_t *bytes_recv)</td></tr>
<tr class="memdesc:a8660ba52183d73fde7347516d56c61f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Listens asynchronously to UDP packets sent from Lhings server UDP port 3478.  <a href="#a8660ba52183d73fde7347516d56c61f6">More...</a><br/></td></tr>
<tr class="separator:a8660ba52183d73fde7347516d56c61f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This header file contains all the functions that abstract the UDP communications of the library. </p>
<p>All the function in this header file belong to the abstraction API of the library and need to be reimplemented when changing platform. The documentation of each function contains all the information about its expected behaviour. This information must be carefully followed when porting the library to other platforms. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a8660ba52183d73fde7347516d56c61f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* lh_receive_from_server </td>
          <td>(</td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>bytes_recv</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Listens asynchronously to UDP packets sent from Lhings server UDP port 3478. </p>
<p>The call must not block indefinitely until a packet is received, since this would stall the main loop of execution (this C library is implemented using a single thread). Listening must be done in the same port as the one used by lh_send_to_server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bytes_recv</td><td>If not null, the number of bytes received will be stored in the address it points to. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>null if no data is received, otherwise an array of bytes containing the data received. </dd></dl>

</div>
</div>
<a class="anchor" id="a584c71f092ef9d829a6ad2e13b3e788e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lh_send_to_server </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_stun_message.html">StunMessage</a> *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends to Lhings server (www.lhings.com) UDP port 3478 the bytes that make up the given STUN message. </p>
<p>Implementations must bind to a port and use it for the entire session, so that the server knows where to send replies and requests to the device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success, 0 otherwise. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 23 2015 07:20:28 for lhings-c by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
