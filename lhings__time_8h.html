<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>lhings-c: abstraction/timing/lhings_time.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="lhings_logo_peque_azul_transp.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">lhings-c
   </div>
   <div id="projectbrief">Lhings C library for Linux</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bdacf7e7d9b2fccc8d2916146d112d0c.html">abstraction</a></li><li class="navelem"><a class="el" href="dir_5d4310707894c420759c3e7eea368f56.html">timing</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">lhings_time.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This header file defines the functions that provide access to the hardware clock of the device.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5042412b92c44dabcd47a05ac14c0110"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lhings__time_8h.html#a5042412b92c44dabcd47a05ac14c0110">lh_get_UTC_unix_time</a> ()</td></tr>
<tr class="memdesc:a5042412b92c44dabcd47a05ac14c0110"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a 32 bit integer with the UNIX time in seconds.  <a href="#a5042412b92c44dabcd47a05ac14c0110">More...</a><br/></td></tr>
<tr class="separator:a5042412b92c44dabcd47a05ac14c0110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4de70727f921fc33b8ac803c87d1d83e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lhings__time_8h.html#a4de70727f921fc33b8ac803c87d1d83e">lh_update_time_offset</a> (uint32_t server_time)</td></tr>
<tr class="memdesc:a4de70727f921fc33b8ac803c87d1d83e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates an internal time reference so that the values returned by lh_get_UTC_unix_time are synchronized with the time of the server.  <a href="#a4de70727f921fc33b8ac803c87d1d83e">More...</a><br/></td></tr>
<tr class="separator:a4de70727f921fc33b8ac803c87d1d83e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac286989e8aa3af664930d79729a0782e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lhings__time_8h.html#ac286989e8aa3af664930d79729a0782e">lh_sleep</a> (uint32_t millis)</td></tr>
<tr class="memdesc:ac286989e8aa3af664930d79729a0782e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the execution of the program during a given period of time.  <a href="#ac286989e8aa3af664930d79729a0782e">More...</a><br/></td></tr>
<tr class="separator:ac286989e8aa3af664930d79729a0782e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62abcc07a503e23fd55bf86480440a23"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lhings__time_8h.html#a62abcc07a503e23fd55bf86480440a23">lh_get_absolute_time_millis</a> ()</td></tr>
<tr class="memdesc:a62abcc07a503e23fd55bf86480440a23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function used for precision timing.  <a href="#a62abcc07a503e23fd55bf86480440a23">More...</a><br/></td></tr>
<tr class="separator:a62abcc07a503e23fd55bf86480440a23"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This header file defines the functions that provide access to the hardware clock of the device. </p>
<p>All the functions in this header file belong to the abstraction API of the library and need to be reimplemented when changing platform. The documentation of each function contains all the information about its expected behaviour. This information must be carefully followed when porting the library to other platforms. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a62abcc07a503e23fd55bf86480440a23"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t lh_get_absolute_time_millis </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function used for precision timing. </p>
<p>Returns the time elapsed since an arbitrary reference in time, in milliseconds. The time reference can be any (the start of execution of the program, the UNIX epoch, whatwever) as long as it does not change during program execution.</p>
<dl class="section return"><dt>Returns</dt><dd>A 32 bit integer containing representing the number of milliseconds elapsed since the time reference. </dd></dl>

</div>
</div>
<a class="anchor" id="a5042412b92c44dabcd47a05ac14c0110"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t lh_get_UTC_unix_time </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a 32 bit integer with the UNIX time in seconds. </p>
<p>This method must take into account the calls to lh_update_time_offset so that the time it returns is synchronized with the server time. The recommended way of doing this is by storing the time offset between local time and server time, and substracting that difference from local time when this function is called. Look at the implementation of the Linux version of this C Library to see an example of how to do it.</p>
<p>If UNIX time is not available, the seconds elapsed since a constant reference time in the past must be returned. This time reference must not change during the execution of the program, although it may change between device reboots. </p>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

</div>
</div>
<a class="anchor" id="ac286989e8aa3af664930d79729a0782e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lh_sleep </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>millis</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops the execution of the program during a given period of time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">millis</td><td>The number of milliseconds execution will be stopped. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a4de70727f921fc33b8ac803c87d1d83e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lh_update_time_offset </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>server_time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates an internal time reference so that the values returned by lh_get_UTC_unix_time are synchronized with the time of the server. </p>
<p>This function is used internally by the library to synchronize system clock with the server clock. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server_time</td><td>The server time in seconds. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 23 2015 07:20:28 for lhings-c by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
